# 📟 מערכת מוקדן למשטרה ומד"א

מערכת מוקדן מתקדמת לשרתי FiveM עם תמיכה מלאה במשטרה ומד"א.

## 🚔 תכונות עיקריות

### 📋 רשימת שוטרים/פראמדיקים
- הצגת כל השוטרים והפראמדיקים הפעילים
- חלוקה לפי ערוצי רדיו
- סימון שחקנים שמדברים
- הצגת דרגה ותג אישי
- עדכון מיידי לשינויים

### 🎛️ פאנל ניהול מוקדן
- הגדרת תג אישי לכל שחקן
- שליטה בתצוגת הרשימה
- התאמת גודל פונט
- התאמת שקיפות
- פתיחה/סגירה עם מקשים

### 📡 אינטגרציות
- **pma-voice** - תמיכה מלאה בערוצי רדיו
- **ESX** - תמיכה במערכת העבודות
- **oxmysql** - שמירת נתונים

## 🔧 התקנה

### שלב 1: הוספת העמודות ל-Database (ידוע כ SQL.SQL)
```sql
ALTER TABLE `users` 
ADD COLUMN IF NOT EXISTS `pd_tag` VARCHAR(50) DEFAULT 'אין-תג',
ADD COLUMN IF NOT EXISTS `ems_tag` VARCHAR(50) DEFAULT 'אין-תג';

UPDATE `users` 
SET `pd_tag` = 'אין-תג'
WHERE `job` = 'police' AND (`pd_tag` IS NULL OR `pd_tag` = '');

UPDATE `users` 
SET `ems_tag` = 'אין-תג'
WHERE `job` = 'ambulance' AND (`ems_tag` IS NULL OR `ems_tag` = '');
```

### שלב 2: הוספת המשאב
1. העלה את התיקייה `lg-dispatch` לתיקיית `resources`
2. הוסף ל-`server.cfg`:
```cfg
ensure lg-dispatch
```

### שלב 3: תלות במשאבים אחרים
יש לוודא שהמשאבים הבאים פועלים:
- `es_extended`
- `pma-voice`
- `oxmysql`

## 🎮 שימוש במערכת

### מקשים
- **`=`** - פתיחת פאנל מוקדן
- **`ESC`** - סגירת פאנל
- **`/plist`** - פקודה לפתיחת הפאנל

### פקודות
- **`/setradio [מספר]`** - הכנסה לערוץ רדיו
- **`/leaveradio`** - יציאה מערוץ רדיו
- **`/plist`** - פתיחת מערכת המוקדן

### הגדרת תג אישי
1. פתח את הפאנל עם `=` או `/plist`
2. הכנס תג (לדוגמה: "מ-1", "פראמדיק-3")
3. לחץ על "שמור"

## ⚙️ התאמה אישית

### קובץ config.lua
בקובץ `config.lua` ניתן להתאים:

#### צבעי תגים
```lua
Config.TagColors = {
    ["מ"] = {r = 139, g = 0, b = 0},
    ["ירקון"] = {r = 255, g = 0, b = 0},
    -- הוסף תגים נוספים
}

Config.EMSTagColors = {
    ["מער"] = {r = 220, g = 20, b = 60},
    ["פראמדיק"] = {r = 255, g = 69, b = 0},
    -- הוסף תגים נוספים
}
```

#### קטגוריות רדיו
```lua
Config.RadioCategories = {
    [500] = "כלל גופי הביטחון 🚨",
    [1] = "קשר ראשי 👮",
    -- הוסף ערוצים נוספים
}

Config.EMSRadioCategories = {
    [500] = "כלל גופי הביטחון 🚨",
    [10] = "קשר ראשי מד״א 🚑",
    -- הוסף ערוצים נוספים
}
```

## 🎨 עיצוב

### מצבי צבע
- **משטרה** - כחול
- **מד"א** - אדום  

### תצוגה
- רשימה שקופה עם אפשרות שינוי שקיפות
- גרירה של הרשימה על המסך
- כיבוי/הדלקת תצוגת הרשימה
- שינוי גודל פונטים

## 🔧 פתרון בעיות

### תגים לא נשמרים
1. ודא שה-SQL רץ בהצלחה
2. בדוק את הקונסול עבור שגיאות
3. וודא שיש הרשאות כתיבה לטבלת users

### הרשימה לא מתעדכנת
1. בדוק אם pma-voice פועל
2. ודא שהשחקן במשטרה/מד"א
3. בדוק את הקונסול של המשאב

### פאנל לא נפתח
1. ודא שהמקש `=` לא תפוס
2. בדוק אם NUI פועל
3. וודא שהשחקן במשטרה/מד"א

## 📞 תמיכה

### דרישות מערכת
- **FiveM** גרסה עדכנית
- **ESX** 1.2 ומעלה
- **pma-voice** גרסה עדכנית
- **MySQL** 5.7 ומעלה

### קרדיט
**מפתח:** GiborLG  
**גרסה:** 1.0.0  
**עדכון אחרון:** 21/01/2026

## 🚀 ביצועים

המערכת מתוכננת להיות קלה על הביצועים עם:
- עדכונים חכמים (רק כשצריך)
- קריאות SQL יעילות
- תצוגה מותאמת ל-FPS גבוה
- זיכרון מינימלי

---

**📢 הערה:** המערכת נבדקה על ESX עם pma-voice. מומלץ לבדוק התאמה עם מערכות דיבור אחרות.

**✨ תודה שהורדתם את המערכת!**